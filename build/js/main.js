function isDraggable(e){var t=!1,o=Array.from(e.classList);return draggableClasses.forEach(function(e){-1!==o.indexOf(e)&&(t=!0)}),t}function inRange(e){var t=getRangeBox(e),o=t.getBoundingClientRect();if("horizontal"==t.dataset.direction){a=(r=t.offsetLeft)+t.offsetWidth;if(e.clientX<r||e.clientX>a)return!1}else{var r=o.top,a=r+t.offsetHeight;if(e.clientY<r||e.clientY>a)return!1}return!0}function updateProgress(){var e=player.currentTime,t=e/player.duration*100;progress.style.width=t+"%",currentTime.textContent=formatTime(e)}function updateVolume(){volumeProgress.style.height=100*player.volume+"%",player.volume>=.5?speaker.attributes.d.value="M14.667 0v2.747c3.853 1.146 6.666 4.72 6.666 8.946 0 4.227-2.813 7.787-6.666 8.934v2.76C20 22.173 24 17.4 24 11.693 24 5.987 20 1.213 14.667 0zM18 11.693c0-2.36-1.333-4.386-3.333-5.373v10.707c2-.947 3.333-2.987 3.333-5.334zm-18-4v8h5.333L12 22.36V1.027L5.333 7.693H0z":player.volume<.5&&player.volume>.05?speaker.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667M17.333 11.373C17.333 9.013 16 6.987 14 6v10.707c2-.947 3.333-2.987 3.333-5.334z":player.volume<=.05&&(speaker.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667")}function getRangeBox(e){var t=e.target,o=currentlyDragged;return"click"==e.type&&isDraggable(e.target)&&(t=e.target.parentElement.parentElement),"mousemove"==e.type&&(t=o.parentElement.parentElement),t}function getCoefficient(e){var t=getRangeBox(e),o=t.getBoundingClientRect(),r=0;if("horizontal"==t.dataset.direction)r=(e.clientX-t.offsetLeft)/t.clientWidth;else if("vertical"==t.dataset.direction){var a=t.clientHeight;r=1-(e.clientY-o.top)/a}return r}function rewind(e){inRange(e)&&(player.currentTime=player.duration*getCoefficient(e))}function changeVolume(e){inRange(e)&&(player.volume=getCoefficient(e))}function formatTime(e){var t=Math.floor(e/60),o=Math.floor(e%60);return t+":"+(o<10?"0"+o:o)}function togglePlay(){player.paused?(playPause.attributes.d.value="M0 0h6v24H0zM12 0h6v24h-6z",player.play()):(playPause.attributes.d.value="M18 12L0 24V0",player.pause())}function makePlay(){playpauseBtn.style.display="block",loading.style.display="none"}function directionAware(){window.innerHeight<250?(volumeControls.style.bottom="-54px",volumeControls.style.left="54px"):audioPlayer.offsetTop<154?(volumeControls.style.bottom="-164px",volumeControls.style.left="-3px"):(volumeControls.style.bottom="52px",volumeControls.style.left="-3px")}$(document).ready(function(){new Swiper(".swiper-container",{slidesPerView:3,slidesPerColumn:2,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{768:{slidesPerView:2,slidesPerColumn:3}}});$(".login a").on("click",function(){$(".login_block").toggleClass("login_block__active"),$(".over").toggleClass("over__active")}),$(".over").on("click",function(){$(".login_block").removeClass("login_block__active"),$(".over").removeClass("over__active")}),$(".login_block__close").on("click",function(){$(".login_block").removeClass("login_block__active"),$(".over").removeClass("over__active")}),setTimeout(function(){$(".newsletter_block").addClass("newsletter_block__active"),$(".over").toggleClass("over__active")},3e3),$(".over").on("click",function(){$(".newsletter_block").removeClass("newsletter_block__active"),$(".over").removeClass("over__active")}),$(".newsletter_block__close").on("click",function(){$(".newsletter_block").removeClass("newsletter_block__active"),$(".over").removeClass("over__active")})}),window.dailyui={init:function(){function e(e){var t=$(e).parent();$(e).val().length>0?t.addClass("input-filled"):t.removeClass("input-filled")}$(".input-field").on("change keyup",function(){e(this)}),$(".password-field").each(function(e,t){var o=$(t);$(".hidepassword").click(function(){var e="";$(this).hasClass("hidepassword")?($(this).removeClass("hidepassword"),$(this).addClass("showpassword"),e="text"):($(this).removeClass("showpassword"),$(this).addClass("hidepassword"),e="password");var t=$("<input type="+e+" />").attr("id",o.attr("id")).attr("name",o.attr("name")).attr("class",o.attr("class")).attr("maxlength",o.attr("maxlength")).val(o.val()).insertBefore(o);o.remove(),o=t}).insertAfter(o)}),$("#card-no").inputmask("9999 9999 9999 9999",{placeholder:""}),$("#card-expire").inputmask("99 / 99",{placeholder:""})}},jQuery(document).ready(function(){$=jQuery,dailyui.init()});var controller=new ScrollMagic.Controller;if($(window).width()>767){var t0=new TimelineLite;t0.staggerFromTo(".header_top",2,{opacity:0,y:-50},{opacity:1,y:0},.1);var t1=new TimelineLite;t1.staggerFromTo(".home_start .container div",2,{opacity:0,x:-150},{opacity:1,x:0},.1);var t3=new TimelineLite;t3.staggerFromTo(".home_phrase .container",2,{opacity:0,y:-50},{opacity:1,y:0},.1);var t4=new TimelineLite;t4.staggerFromTo(".about_info .container",2,{opacity:0,y:-50},{opacity:1,y:0},.1);var t5=new TimelineLite;t5.staggerFromTo(".about_advisors .container",2,{opacity:0,y:-50},{opacity:1,y:0},.1);var tween1=TweenMax.staggerFromTo(".home_start",2,{backgroundPosition:"right 0"},{backgroundPosition:"right -200px"},1),scene=new ScrollMagic.Scene({triggerElement:".home_publications",duration:2e3,triggerHook:1,offset:0}).setTween(tween1).addTo(controller),tween2=TweenMax.staggerFromTo(".home_start .container",2,{y:0},{y:50},1),scene=new ScrollMagic.Scene({triggerElement:".home_phrase",duration:2e3,triggerHook:1,offset:0}).setTween(tween2).addTo(controller),tween3=TweenMax.staggerFromTo(".home_p_item:nth-child(odd) .home_p_bl",2,{opacity:.5},{opacity:1},1),scene=new ScrollMagic.Scene({triggerElement:".home_publications",duration:1e3,triggerHook:1,offset:0}).setTween(tween3).addTo(controller),tween4=TweenMax.staggerFromTo(".home_p_item:nth-child(even) .home_p_bl",2,{opacity:.5},{opacity:1},1),scene=new ScrollMagic.Scene({triggerElement:".home_publications",duration:1e3,triggerHook:1,offset:0}).setTween(tween4).addTo(controller),tween5=TweenMax.staggerFromTo(".home_time .container",2,{opacity:.5,y:-170},{opacity:1,y:0},1),scene=new ScrollMagic.Scene({triggerElement:".home_time",duration:1e3,triggerHook:1,offset:0}).setTween(tween5).addTo(controller),tween6=TweenMax.staggerFromTo(".home_a_wrap__item:first-child",2,{opacity:.5,x:-170},{opacity:1,x:0},1),scene=new ScrollMagic.Scene({triggerElement:".home_about",duration:1e3,triggerHook:1,offset:0}).setTween(tween6).addTo(controller),tween7=TweenMax.staggerFromTo(".home_a_wrap__item:nth-child(2) li",2,{opacity:.5,x:50},{opacity:1,x:0},1),scene=new ScrollMagic.Scene({triggerElement:".home_about",duration:700,triggerHook:1,offset:0}).setTween(tween7).addTo(controller),tween8=TweenMax.staggerFromTo(".home_about__btn",2,{opacity:.5,y:-170},{opacity:1,y:0},1),scene=new ScrollMagic.Scene({triggerElement:".home_about",duration:1e3,triggerHook:1,offset:0}).setTween(tween8).addTo(controller),tween9=TweenMax.staggerFromTo(".home_about__text",2,{opacity:.5,y:-170},{opacity:1,y:0},1),scene=new ScrollMagic.Scene({triggerElement:".home_about",duration:1e3,triggerHook:1,offset:0}).setTween(tween9).addTo(controller),tween10=TweenMax.staggerFromTo(".narrators_item",2,{opacity:.5},{opacity:1},1),scene=new ScrollMagic.Scene({triggerElement:".about_narrators",duration:1300,triggerHook:1,offset:0}).setTween(tween10).addTo(controller)}!function(){"use strict";var e=document.querySelector(".overlay"),t=document.querySelector(".overlay-loader"),o=new TimelineMax,r=new TimelineMax;!function(){o.to(e,.6,{top:"100%",ease:Power4.easeInOut,delay:.25}),r.to(t,.5,{y:"40",opacity:0})}()}();var audioPlayer=document.querySelector(".green-audio-player"),playPause=audioPlayer.querySelector("#playPause"),playpauseBtn=audioPlayer.querySelector(".play-pause-btn"),loading=audioPlayer.querySelector(".loading"),progress=audioPlayer.querySelector(".progress"),sliders=audioPlayer.querySelectorAll(".slider"),volumeBtn=audioPlayer.querySelector(".volume-btn"),volumeControls=audioPlayer.querySelector(".volume-controls"),volumeProgress=volumeControls.querySelector(".slider .progress"),player=audioPlayer.querySelector("audio"),currentTime=audioPlayer.querySelector(".current-time"),totalTime=audioPlayer.querySelector(".total-time"),speaker=audioPlayer.querySelector("#speaker"),draggableClasses=["pin"],currentlyDragged=null;window.addEventListener("mousedown",function(e){if(!isDraggable(e.target))return!1;var t=(currentlyDragged=e.target).dataset.method;this.addEventListener("mousemove",window[t],!1),window.addEventListener("mouseup",function(){currentlyDragged=!1,window.removeEventListener("mousemove",window[t],!1)},!1)}),playpauseBtn.addEventListener("click",togglePlay),player.addEventListener("timeupdate",updateProgress),player.addEventListener("volumechange",updateVolume),player.addEventListener("loadedmetadata",function(){totalTime.textContent=formatTime(player.duration)}),player.addEventListener("canplay",makePlay),player.addEventListener("ended",function(){playPause.attributes.d.value="M18 12L0 24V0",player.currentTime=0}),volumeBtn.addEventListener("click",function(){volumeBtn.classList.toggle("open"),volumeControls.classList.toggle("hidden")}),window.addEventListener("resize",directionAware),sliders.forEach(function(e){var t=e.querySelector(".pin");e.addEventListener("click",window[t.dataset.method])}),directionAware();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaXNEcmFnZ2FibGUiLCJlbCIsImNhbkRyYWciLCJjbGFzc2VzIiwiQXJyYXkiLCJmcm9tIiwiY2xhc3NMaXN0IiwiZHJhZ2dhYmxlQ2xhc3NlcyIsImZvckVhY2giLCJkcmFnZ2FibGUiLCJpbmRleE9mIiwiaW5SYW5nZSIsImV2ZW50IiwicmFuZ2VCb3giLCJnZXRSYW5nZUJveCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJkYXRhc2V0IiwiZGlyZWN0aW9uIiwibWF4IiwibWluIiwib2Zmc2V0TGVmdCIsIm9mZnNldFdpZHRoIiwiY2xpZW50WCIsInRvcCIsIm9mZnNldEhlaWdodCIsImNsaWVudFkiLCJ1cGRhdGVQcm9ncmVzcyIsImN1cnJlbnQiLCJwbGF5ZXIiLCJjdXJyZW50VGltZSIsInBlcmNlbnQiLCJkdXJhdGlvbiIsInByb2dyZXNzIiwic3R5bGUiLCJ3aWR0aCIsInRleHRDb250ZW50IiwiZm9ybWF0VGltZSIsInVwZGF0ZVZvbHVtZSIsInZvbHVtZVByb2dyZXNzIiwiaGVpZ2h0Iiwidm9sdW1lIiwic3BlYWtlciIsImF0dHJpYnV0ZXMiLCJkIiwidmFsdWUiLCJ0YXJnZXQiLCJjdXJyZW50bHlEcmFnZ2VkIiwidHlwZSIsInBhcmVudEVsZW1lbnQiLCJnZXRDb2VmZmljaWVudCIsInNsaWRlciIsIksiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInJld2luZCIsImNoYW5nZVZvbHVtZSIsInRpbWUiLCJNYXRoIiwiZmxvb3IiLCJzZWMiLCJ0b2dnbGVQbGF5IiwicGF1c2VkIiwicGxheVBhdXNlIiwicGxheSIsInBhdXNlIiwibWFrZVBsYXkiLCJwbGF5cGF1c2VCdG4iLCJkaXNwbGF5IiwibG9hZGluZyIsImRpcmVjdGlvbkF3YXJlIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJ2b2x1bWVDb250cm9scyIsImJvdHRvbSIsImxlZnQiLCJhdWRpb1BsYXllciIsIm9mZnNldFRvcCIsIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiU3dpcGVyIiwic2xpZGVzUGVyVmlldyIsInNsaWRlc1BlckNvbHVtbiIsInNwYWNlQmV0d2VlbiIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJicmVha3BvaW50cyIsIjc2OCIsIm9uIiwidG9nZ2xlQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInNldFRpbWVvdXQiLCJhZGRDbGFzcyIsImRhaWx5dWkiLCJpbml0IiwiY2hlY2tGb3JJbnB1dCIsImVsZW1lbnQiLCJpbnB1dFBhcmVudCIsInBhcmVudCIsInZhbCIsImxlbmd0aCIsInRoaXMiLCJlYWNoIiwiaW5kZXgiLCJpbnB1dCIsIiRpbnB1dCIsImNsaWNrIiwiY2hhbmdlIiwiaGFzQ2xhc3MiLCJyZXAiLCJhdHRyIiwiaW5zZXJ0QmVmb3JlIiwicmVtb3ZlIiwiaW5zZXJ0QWZ0ZXIiLCJpbnB1dG1hc2siLCJwbGFjZWhvbGRlciIsImpRdWVyeSIsImNvbnRyb2xsZXIiLCJTY3JvbGxNYWdpYyIsIkNvbnRyb2xsZXIiLCJ0MCIsIlRpbWVsaW5lTGl0ZSIsInN0YWdnZXJGcm9tVG8iLCJvcGFjaXR5IiwieSIsInQxIiwieCIsInQzIiwidDQiLCJ0NSIsInR3ZWVuMSIsIlR3ZWVuTWF4IiwiYmFja2dyb3VuZFBvc2l0aW9uIiwic2NlbmUiLCJTY2VuZSIsInRyaWdnZXJFbGVtZW50IiwidHJpZ2dlckhvb2siLCJvZmZzZXQiLCJzZXRUd2VlbiIsImFkZFRvIiwidHdlZW4yIiwidHdlZW4zIiwidHdlZW40IiwidHdlZW41IiwidHdlZW42IiwidHdlZW43IiwidHdlZW44IiwidHdlZW45IiwidHdlZW4xMCIsIm92ZXJsYXkiLCJxdWVyeVNlbGVjdG9yIiwibG9hZGVyIiwib3ZlcmxheVRMIiwiVGltZWxpbmVNYXgiLCJsb2FkZXJUTCIsInRvIiwiZWFzZSIsIlBvd2VyNCIsImVhc2VJbk91dCIsImRlbGF5Iiwic2xpZGVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ2b2x1bWVCdG4iLCJ0b3RhbFRpbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlTWV0aG9kIiwibWV0aG9kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRvZ2dsZSIsInBpbiJdLCJtYXBwaW5ncyI6IkFBMFVBLFNBQVNBLFlBQVlDLEdBQ2pCLElBQUlDLEdBQVUsRUFDVkMsRUFBVUMsTUFBTUMsS0FBS0osRUFBR0ssV0FJNUIsT0FIQUMsaUJBQWlCQyxRQUFRLFNBQVVDLElBQ0ssSUFBaENOLEVBQVFPLFFBQVFELEtBQW1CUCxHQUFVLEtBRTlDQSxFQUdYLFNBQVNTLFFBQVFDLEdBQ2IsSUFBSUMsRUFBV0MsWUFBWUYsR0FDdkJHLEVBQU9GLEVBQVNHLHdCQUVwQixHQUFpQixjQURESCxFQUFTSSxRQUFRQyxVQUNGLENBRXZCQyxHQURBQyxFQUFNUCxFQUFTUSxZQUNIUixFQUFTUyxZQUN6QixHQUFJVixFQUFNVyxRQUFVSCxHQUFPUixFQUFNVyxRQUFVSixFQUFLLE9BQU8sTUFDcEQsQ0FDSCxJQUFJQyxFQUFNTCxFQUFLUyxJQUNYTCxFQUFNQyxFQUFNUCxFQUFTWSxhQUN6QixHQUFJYixFQUFNYyxRQUFVTixHQUFPUixFQUFNYyxRQUFVUCxFQUFLLE9BQU8sRUFFM0QsT0FBTyxFQUdYLFNBQVNRLGlCQUNMLElBQUlDLEVBQVVDLE9BQU9DLFlBQ2pCQyxFQUFVSCxFQUFVQyxPQUFPRyxTQUFXLElBQzFDQyxTQUFTQyxNQUFNQyxNQUFRSixFQUFVLElBRWpDRCxZQUFZTSxZQUFjQyxXQUFXVCxHQUd6QyxTQUFTVSxlQUNMQyxlQUFlTCxNQUFNTSxPQUF5QixJQUFoQlgsT0FBT1ksT0FBZSxJQUNoRFosT0FBT1ksUUFBVSxHQUNqQkMsUUFBUUMsV0FBV0MsRUFBRUMsTUFBUSw4UUFDdEJoQixPQUFPWSxPQUFTLElBQU9aLE9BQU9ZLE9BQVMsSUFDOUNDLFFBQVFDLFdBQVdDLEVBQUVDLE1BQVEsMkhBQ3RCaEIsT0FBT1ksUUFBVSxNQUN4QkMsUUFBUUMsV0FBV0MsRUFBRUMsTUFBUSw0Q0FJckMsU0FBUy9CLFlBQVlGLEdBQ2pC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WSxFQUFNa0MsUUFBUyxPQUFPLEVBR3ZDLElBQUl5SCxHQURKeEgsaUJBQW1CbkMsRUFBTWtDLFFBQ1c3QixRQUFRdUosT0FFNUNqRSxLQUFLK0QsaUJBQWlCLFlBQWEvRixPQUFPZ0csSUFBZSxHQUV6RGhHLE9BQU8rRixpQkFBaUIsVUFBVyxXQUMvQnZILGtCQUFtQixFQUNuQndCLE9BQU9rRyxvQkFBb0IsWUFBYWxHLE9BQU9nRyxJQUFlLEtBQy9ELEtBR1BwRyxhQUFhbUcsaUJBQWlCLFFBQVN6RyxZQUN2Q2hDLE9BQU95SSxpQkFBaUIsYUFBYzNJLGdCQUN0Q0UsT0FBT3lJLGlCQUFpQixlQUFnQmhJLGNBQ3hDVCxPQUFPeUksaUJBQWlCLGlCQUFrQixXQUN0Q0QsVUFBVWpJLFlBQWNDLFdBQVdSLE9BQU9HLFlBRTlDSCxPQUFPeUksaUJBQWlCLFVBQVdwRyxVQUNuQ3JDLE9BQU95SSxpQkFBaUIsUUFBUyxXQUM3QnZHLFVBQVVwQixXQUFXQyxFQUFFQyxNQUFRLGdCQUMvQmhCLE9BQU9DLFlBQWMsSUFHekJzSSxVQUFVRSxpQkFBaUIsUUFBUyxXQUNoQ0YsVUFBVTlKLFVBQVVvSyxPQUFPLFFBQzNCakcsZUFBZW5FLFVBQVVvSyxPQUFPLFlBR3BDbkcsT0FBTytGLGlCQUFpQixTQUFVaEcsZ0JBRWxDNEYsUUFBUTFKLFFBQVEsU0FBVTJDLEdBQ3RCLElBQUl3SCxFQUFNeEgsRUFBT3FHLGNBQWMsUUFDL0JyRyxFQUFPbUgsaUJBQWlCLFFBQVMvRixPQUFPb0csRUFBSTFKLFFBQVF1SixXQUd4RGxHIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ3VzdG9tXG4gKi9cblxuXG4kKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG5cblxuICAgIC8vIFNsaWRlclxuXG4gICAgdmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoJy5zd2lwZXItY29udGFpbmVyJywge1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxuICAgICAgICBzbGlkZXNQZXJDb2x1bW46IDIsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMzAsXG4gICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldidcbiAgICAgICAgfSxcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgICAgIC8vIHdoZW4gd2luZG93IHdpZHRoIGlzIDw9IDc2OHB4XG4gICAgICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxuICAgICAgICAgICAgICAgIHNsaWRlc1BlckNvbHVtbjogM1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBMb2dpblxuXG4gICAgJCgnLmxvZ2luIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAkKCcubG9naW5fYmxvY2snKS50b2dnbGVDbGFzcygnbG9naW5fYmxvY2tfX2FjdGl2ZScpO1xuICAgICAgICAkKCcub3ZlcicpLnRvZ2dsZUNsYXNzKCdvdmVyX19hY3RpdmUnKTtcbiAgICB9KTtcblxuICAgICQoJy5vdmVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgJCgnLmxvZ2luX2Jsb2NrJykucmVtb3ZlQ2xhc3MoJ2xvZ2luX2Jsb2NrX19hY3RpdmUnKTtcbiAgICAgICAgJCgnLm92ZXInKS5yZW1vdmVDbGFzcygnb3Zlcl9fYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAkKCcubG9naW5fYmxvY2tfX2Nsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgJCgnLmxvZ2luX2Jsb2NrJykucmVtb3ZlQ2xhc3MoJ2xvZ2luX2Jsb2NrX19hY3RpdmUnKTtcbiAgICAgICAgJCgnLm92ZXInKS5yZW1vdmVDbGFzcygnb3Zlcl9fYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAvLyBOZXdzbGV0dGVyXG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgJCgnLm5ld3NsZXR0ZXJfYmxvY2snKS5hZGRDbGFzcygnbmV3c2xldHRlcl9ibG9ja19fYWN0aXZlJyk7XG4gICAgICAgICQoJy5vdmVyJykudG9nZ2xlQ2xhc3MoJ292ZXJfX2FjdGl2ZScpO1xuICAgIH0sIDMwMDApO1xuXG4gICAgJCgnLm92ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAkKCcubmV3c2xldHRlcl9ibG9jaycpLnJlbW92ZUNsYXNzKCduZXdzbGV0dGVyX2Jsb2NrX19hY3RpdmUnKTtcbiAgICAgICAgJCgnLm92ZXInKS5yZW1vdmVDbGFzcygnb3Zlcl9fYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAkKCcubmV3c2xldHRlcl9ibG9ja19fY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAkKCcubmV3c2xldHRlcl9ibG9jaycpLnJlbW92ZUNsYXNzKCduZXdzbGV0dGVyX2Jsb2NrX19hY3RpdmUnKTtcbiAgICAgICAgJCgnLm92ZXInKS5yZW1vdmVDbGFzcygnb3Zlcl9fYWN0aXZlJyk7XG4gICAgfSk7XG5cblxufSk7XG5cbndpbmRvdy5kYWlseXVpID0ge1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBjaGVja0ZvcklucHV0KGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dFBhcmVudCA9ICQoZWxlbWVudCkucGFyZW50KCk7XG5cbiAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLnZhbCgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpbnB1dFBhcmVudC5hZGRDbGFzcyhcImlucHV0LWZpbGxlZFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5wdXRQYXJlbnQucmVtb3ZlQ2xhc3MoXCJpbnB1dC1maWxsZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkKFwiLmlucHV0LWZpZWxkXCIpLm9uKFwiY2hhbmdlIGtleXVwXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2hlY2tGb3JJbnB1dCh0aGlzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIi5wYXNzd29yZC1maWVsZFwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBpbnB1dCkge1xuICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQoaW5wdXQpO1xuICAgICAgICAgICAgJChcIi5oaWRlcGFzc3dvcmRcIilcbiAgICAgICAgICAgICAgICAuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFuZ2UgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImhpZGVwYXNzd29yZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImhpZGVwYXNzd29yZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJzaG93cGFzc3dvcmRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgPSBcInRleHRcIjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJzaG93cGFzc3dvcmRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiaGlkZXBhc3N3b3JkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlID0gXCJwYXNzd29yZFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXAgPSAkKFwiPGlucHV0IHR5cGU9XCIgKyBjaGFuZ2UgKyBcIiAvPlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCAkaW5wdXQuYXR0cihcImlkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJuYW1lXCIsICRpbnB1dC5hdHRyKFwibmFtZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgJGlucHV0LmF0dHIoXCJjbGFzc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwibWF4bGVuZ3RoXCIsICRpbnB1dC5hdHRyKFwibWF4bGVuZ3RoXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnZhbCgkaW5wdXQudmFsKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0QmVmb3JlKCRpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgICRpbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0ID0gcmVwO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmluc2VydEFmdGVyKCRpbnB1dCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoXCIjY2FyZC1ub1wiKS5pbnB1dG1hc2soXCI5OTk5IDk5OTkgOTk5OSA5OTk5XCIsIHsgcGxhY2Vob2xkZXI6IFwiXCIgfSk7XG4gICAgICAgICQoXCIjY2FyZC1leHBpcmVcIikuaW5wdXRtYXNrKFwiOTkgLyA5OVwiLCB7IHBsYWNlaG9sZGVyOiBcIlwiIH0pO1xuICAgIH1cbn07XG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJCA9IGpRdWVyeTtcbiAgICBkYWlseXVpLmluaXQoKTtcbn0pO1xuXG5cbnZhciBjb250cm9sbGVyID0gbmV3IFNjcm9sbE1hZ2ljLkNvbnRyb2xsZXIoKTtcblxuLy8gSGVhZGVyXG5pZiAoJCggd2luZG93ICkud2lkdGgoKSA+IDc2Nykge1xuXG52YXIgdDAgPSBuZXcgVGltZWxpbmVMaXRlKCk7XG50MC5zdGFnZ2VyRnJvbVRvKCcuaGVhZGVyX3RvcCcsIDIsIHsgb3BhY2l0eTogMCwgeTogLTUwfSwgeyBvcGFjaXR5OiAxLCB5OiAwfSwgMC4xKTtcblxudmFyIHQxID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xudDEuc3RhZ2dlckZyb21UbygnLmhvbWVfc3RhcnQgLmNvbnRhaW5lciBkaXYnLCAyLCB7IG9wYWNpdHk6IDAsIHg6IC0xNTB9LCB7IG9wYWNpdHk6IDEsIHg6IDB9LCAwLjEpO1xuXG5cbnZhciB0MyA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbnQzLnN0YWdnZXJGcm9tVG8oJy5ob21lX3BocmFzZSAuY29udGFpbmVyJywgMiwgeyBvcGFjaXR5OiAwLCB5OiAtNTB9LCB7IG9wYWNpdHk6IDEsIHk6IDB9LCAwLjEpO1xuXG52YXIgdDQgPSBuZXcgVGltZWxpbmVMaXRlKCk7XG50NC5zdGFnZ2VyRnJvbVRvKCcuYWJvdXRfaW5mbyAuY29udGFpbmVyJywgMiwgeyBvcGFjaXR5OiAwLCB5OiAtNTB9LCB7IG9wYWNpdHk6IDEsIHk6IDB9LCAwLjEpO1xuXG52YXIgdDUgPSBuZXcgVGltZWxpbmVMaXRlKCk7XG50NS5zdGFnZ2VyRnJvbVRvKCcuYWJvdXRfYWR2aXNvcnMgLmNvbnRhaW5lcicsIDIsIHsgb3BhY2l0eTogMCwgeTogLTUwfSwgeyBvcGFjaXR5OiAxLCB5OiAwfSwgMC4xKTtcblxuXG4vLyBIZWFkZXIgYmdcblxudmFyIHR3ZWVuMSA9IFR3ZWVuTWF4LnN0YWdnZXJGcm9tVG8oXCIuaG9tZV9zdGFydFwiLCAyLCB7YmFja2dyb3VuZFBvc2l0aW9uOidyaWdodCAwJ30sIHtiYWNrZ3JvdW5kUG9zaXRpb246ICdyaWdodCAtMjAwcHgnfSwgMSk7XG52YXIgc2NlbmUgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe1xuICAgIHRyaWdnZXJFbGVtZW50OiBcIi5ob21lX3B1YmxpY2F0aW9uc1wiLCBkdXJhdGlvbjogMjAwMCxcbiAgICB0cmlnZ2VySG9vazogMSxcbiAgICBvZmZzZXQ6IDBcbn0pXG4gICAgLnNldFR3ZWVuKHR3ZWVuMSlcbiAgICAuYWRkVG8oY29udHJvbGxlcik7XG5cbi8vIEhvbWUgcGhyYXNlXG5cbnZhciB0d2VlbjIgPSBUd2Vlbk1heC5zdGFnZ2VyRnJvbVRvKFwiLmhvbWVfc3RhcnQgLmNvbnRhaW5lclwiLCAyLCB7eTogMH0sIHt5OiA1MH0sIDEpO1xudmFyIHNjZW5lID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHtcbiAgICB0cmlnZ2VyRWxlbWVudDogXCIuaG9tZV9waHJhc2VcIiwgZHVyYXRpb246IDIwMDAsXG4gICAgdHJpZ2dlckhvb2s6IDEsXG4gICAgb2Zmc2V0OiAwXG59KVxuICAgIC5zZXRUd2Vlbih0d2VlbjIpXG4gICAgLmFkZFRvKGNvbnRyb2xsZXIpO1xuXG4vLyBIZWFkZXIgcHVibGljYXRpb25zXG5cbnZhciB0d2VlbjMgPSBUd2Vlbk1heC5zdGFnZ2VyRnJvbVRvKFwiLmhvbWVfcF9pdGVtOm50aC1jaGlsZChvZGQpIC5ob21lX3BfYmxcIiwgMiwge29wYWNpdHk6IDAuNX0sIHtvcGFjaXR5OiAxfSwgMSk7XG52YXIgc2NlbmUgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe1xuICAgIHRyaWdnZXJFbGVtZW50OiBcIi5ob21lX3B1YmxpY2F0aW9uc1wiLCBkdXJhdGlvbjogMTAwMCxcbiAgICB0cmlnZ2VySG9vazogMSxcbiAgICBvZmZzZXQ6IDBcbn0pXG4gICAgLnNldFR3ZWVuKHR3ZWVuMylcbiAgICAuYWRkVG8oY29udHJvbGxlcik7XG5cbnZhciB0d2VlbjQgPSBUd2Vlbk1heC5zdGFnZ2VyRnJvbVRvKFwiLmhvbWVfcF9pdGVtOm50aC1jaGlsZChldmVuKSAuaG9tZV9wX2JsXCIsIDIsIHtvcGFjaXR5OiAwLjV9LCB7b3BhY2l0eTogMX0sIDEpO1xudmFyIHNjZW5lID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHtcbiAgICB0cmlnZ2VyRWxlbWVudDogXCIuaG9tZV9wdWJsaWNhdGlvbnNcIiwgZHVyYXRpb246IDEwMDAsXG4gICAgdHJpZ2dlckhvb2s6IDEsXG4gICAgb2Zmc2V0OiAwXG59KVxuICAgIC5zZXRUd2Vlbih0d2VlbjQpXG4gICAgLmFkZFRvKGNvbnRyb2xsZXIpO1xuXG4vLyBIb21lIHRpbWVcblxudmFyIHR3ZWVuNSA9IFR3ZWVuTWF4LnN0YWdnZXJGcm9tVG8oXCIuaG9tZV90aW1lIC5jb250YWluZXJcIiwgMiwge29wYWNpdHk6IDAuNSwgeTogLTE3MH0sIHtvcGFjaXR5OiAxLCB5OiAwfSwgMSk7XG52YXIgc2NlbmUgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe1xuICAgIHRyaWdnZXJFbGVtZW50OiBcIi5ob21lX3RpbWVcIiwgZHVyYXRpb246IDEwMDAsXG4gICAgdHJpZ2dlckhvb2s6IDEsXG4gICAgb2Zmc2V0OiAwXG59KVxuICAgIC5zZXRUd2Vlbih0d2VlbjUpXG4gICAgLmFkZFRvKGNvbnRyb2xsZXIpO1xuXG4vLyBIb21lIGFib3V0XG5cbnZhciB0d2VlbjYgPSBUd2Vlbk1heC5zdGFnZ2VyRnJvbVRvKFwiLmhvbWVfYV93cmFwX19pdGVtOmZpcnN0LWNoaWxkXCIsIDIsIHtvcGFjaXR5OiAwLjUsIHg6IC0xNzB9LCB7b3BhY2l0eTogMSwgeDogMH0sIDEpO1xudmFyIHNjZW5lID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHtcbiAgICB0cmlnZ2VyRWxlbWVudDogXCIuaG9tZV9hYm91dFwiLCBkdXJhdGlvbjogMTAwMCxcbiAgICB0cmlnZ2VySG9vazogMSxcbiAgICBvZmZzZXQ6IDBcbn0pXG4gICAgLnNldFR3ZWVuKHR3ZWVuNilcbiAgICAuYWRkVG8oY29udHJvbGxlcik7XG5cbnZhciB0d2VlbjcgPSBUd2Vlbk1heC5zdGFnZ2VyRnJvbVRvKFwiLmhvbWVfYV93cmFwX19pdGVtOm50aC1jaGlsZCgyKSBsaVwiLCAyLCB7b3BhY2l0eTogMC41LCB4OiA1MH0sIHtvcGFjaXR5OiAxLCB4OiAwfSwgMSk7XG52YXIgc2NlbmUgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe1xuICAgIHRyaWdnZXJFbGVtZW50OiBcIi5ob21lX2Fib3V0XCIsIGR1cmF0aW9uOiA3MDAsXG4gICAgdHJpZ2dlckhvb2s6IDEsXG4gICAgb2Zmc2V0OiAwXG59KVxuICAgIC5zZXRUd2Vlbih0d2VlbjcpXG4gICAgLmFkZFRvKGNvbnRyb2xsZXIpO1xuXG52YXIgdHdlZW44ID0gVHdlZW5NYXguc3RhZ2dlckZyb21UbyhcIi5ob21lX2Fib3V0X19idG5cIiwgMiwge29wYWNpdHk6IDAuNSwgeTogLTE3MH0sIHtvcGFjaXR5OiAxLCB5OiAwfSwgMSk7XG52YXIgc2NlbmUgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe1xuICAgIHRyaWdnZXJFbGVtZW50OiBcIi5ob21lX2Fib3V0XCIsIGR1cmF0aW9uOiAxMDAwLFxuICAgIHRyaWdnZXJIb29rOiAxLFxuICAgIG9mZnNldDogMFxufSlcbiAgICAuc2V0VHdlZW4odHdlZW44KVxuICAgIC5hZGRUbyhjb250cm9sbGVyKTtcblxudmFyIHR3ZWVuOSA9IFR3ZWVuTWF4LnN0YWdnZXJGcm9tVG8oXCIuaG9tZV9hYm91dF9fdGV4dFwiLCAyLCB7b3BhY2l0eTogMC41LCB5OiAtMTcwfSwge29wYWNpdHk6IDEsIHk6IDB9LCAxKTtcbnZhciBzY2VuZSA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7XG4gICAgdHJpZ2dlckVsZW1lbnQ6IFwiLmhvbWVfYWJvdXRcIiwgZHVyYXRpb246IDEwMDAsXG4gICAgdHJpZ2dlckhvb2s6IDEsXG4gICAgb2Zmc2V0OiAwXG59KVxuICAgIC5zZXRUd2Vlbih0d2VlbjkpXG4gICAgLmFkZFRvKGNvbnRyb2xsZXIpO1xuXG4vLyBBYm91dCBuYXJyYXRvcnNcblxudmFyIHR3ZWVuMTAgPSBUd2Vlbk1heC5zdGFnZ2VyRnJvbVRvKFwiLm5hcnJhdG9yc19pdGVtXCIsIDIsIHtvcGFjaXR5OiAwLjV9LCB7b3BhY2l0eTogMX0sIDEpO1xudmFyIHNjZW5lID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHtcbiAgICB0cmlnZ2VyRWxlbWVudDogXCIuYWJvdXRfbmFycmF0b3JzXCIsIGR1cmF0aW9uOiAxMzAwLFxuICAgIHRyaWdnZXJIb29rOiAxLFxuICAgIG9mZnNldDogMFxufSlcbiAgICAuc2V0VHdlZW4odHdlZW4xMClcbiAgICAuYWRkVG8oY29udHJvbGxlcik7XG5cbn1cbi8vIFByZWxvYWRlclxuXG4oZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5JyksXG4gICAgICAgIGxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5LWxvYWRlcicpLFxuICAgICAgICBvdmVybGF5VEwgPSBuZXcgVGltZWxpbmVNYXgoKSxcbiAgICAgICAgbG9hZGVyVEwgPSBuZXcgVGltZWxpbmVNYXgoKTtcblxuICAgIHZhciBhbmltYXRlT3V0XzIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgb3ZlcmxheVRMLnRvKCBvdmVybGF5LCAuNiwgeyB0b3A6ICcxMDAlJywgZWFzZTogUG93ZXI0LmVhc2VJbk91dCwgZGVsYXk6IC4yNSB9ICk7XG4gICAgICAgIGxvYWRlclRMLnRvKCBsb2FkZXIsIC41LCB7IHk6ICc0MCcsIG9wYWNpdHk6IDAgfSApO1xuICAgIH07XG5cbiAgICB2YXIgYW5pbWF0ZUluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG92ZXJsYXlUTC5mcm9tVG8oIG92ZXJsYXksIC42LCB7IHRvcDogJzEwMCUnLCBib3R0b206IDAgfSwgeyB0b3A6IDAsIGVhc2U6IFBvd2VyNC5lYXNlSW5PdXQgfSApO1xuICAgICAgICBsb2FkZXJUTC5mcm9tVG8oIGxvYWRlciwgLjUsIHsgeTogJzQwJywgb3BhY2l0eTogMCwgZGVsYXk6IC4zMCB9LCB7IHk6IDAsIG9wYWNpdHk6IDEsIGRlbGF5OiAuNiwgZWFzZTogUG93ZXIyLmVhc2VPdXQgfSApO1xuICAgIH07XG5cbiAgICBhbmltYXRlT3V0XzIoKTtcblxuXG59KSgpO1xuXG4vLyBBdWRpb1xuXG52YXIgYXVkaW9QbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JlZW4tYXVkaW8tcGxheWVyJyk7XG52YXIgcGxheVBhdXNlID0gYXVkaW9QbGF5ZXIucXVlcnlTZWxlY3RvcignI3BsYXlQYXVzZScpO1xudmFyIHBsYXlwYXVzZUJ0biA9IGF1ZGlvUGxheWVyLnF1ZXJ5U2VsZWN0b3IoJy5wbGF5LXBhdXNlLWJ0bicpO1xudmFyIGxvYWRpbmcgPSBhdWRpb1BsYXllci5xdWVyeVNlbGVjdG9yKCcubG9hZGluZycpO1xudmFyIHByb2dyZXNzID0gYXVkaW9QbGF5ZXIucXVlcnlTZWxlY3RvcignLnByb2dyZXNzJyk7XG52YXIgc2xpZGVycyA9IGF1ZGlvUGxheWVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXInKTtcbnZhciB2b2x1bWVCdG4gPSBhdWRpb1BsYXllci5xdWVyeVNlbGVjdG9yKCcudm9sdW1lLWJ0bicpO1xudmFyIHZvbHVtZUNvbnRyb2xzID0gYXVkaW9QbGF5ZXIucXVlcnlTZWxlY3RvcignLnZvbHVtZS1jb250cm9scycpO1xudmFyIHZvbHVtZVByb2dyZXNzID0gdm9sdW1lQ29udHJvbHMucXVlcnlTZWxlY3RvcignLnNsaWRlciAucHJvZ3Jlc3MnKTtcbnZhciBwbGF5ZXIgPSBhdWRpb1BsYXllci5xdWVyeVNlbGVjdG9yKCdhdWRpbycpO1xudmFyIGN1cnJlbnRUaW1lID0gYXVkaW9QbGF5ZXIucXVlcnlTZWxlY3RvcignLmN1cnJlbnQtdGltZScpO1xudmFyIHRvdGFsVGltZSA9IGF1ZGlvUGxheWVyLnF1ZXJ5U2VsZWN0b3IoJy50b3RhbC10aW1lJyk7XG52YXIgc3BlYWtlciA9IGF1ZGlvUGxheWVyLnF1ZXJ5U2VsZWN0b3IoJyNzcGVha2VyJyk7XG5cbnZhciBkcmFnZ2FibGVDbGFzc2VzID0gWydwaW4nXTtcbnZhciBjdXJyZW50bHlEcmFnZ2VkID0gbnVsbDtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuXG4gICAgaWYgKCFpc0RyYWdnYWJsZShldmVudC50YXJnZXQpKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjdXJyZW50bHlEcmFnZ2VkID0gZXZlbnQudGFyZ2V0O1xuICAgIHZhciBoYW5kbGVNZXRob2QgPSBjdXJyZW50bHlEcmFnZ2VkLmRhdGFzZXQubWV0aG9kO1xuXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB3aW5kb3dbaGFuZGxlTWV0aG9kXSwgZmFsc2UpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGN1cnJlbnRseURyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHdpbmRvd1toYW5kbGVNZXRob2RdLCBmYWxzZSk7XG4gICAgfSwgZmFsc2UpO1xufSk7XG5cbnBsYXlwYXVzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVBsYXkpO1xucGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCB1cGRhdGVQcm9ncmVzcyk7XG5wbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcigndm9sdW1lY2hhbmdlJywgdXBkYXRlVm9sdW1lKTtcbnBsYXllci5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsIGZ1bmN0aW9uICgpIHtcbiAgICB0b3RhbFRpbWUudGV4dENvbnRlbnQgPSBmb3JtYXRUaW1lKHBsYXllci5kdXJhdGlvbik7XG59KTtcbnBsYXllci5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgbWFrZVBsYXkpO1xucGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIHBsYXlQYXVzZS5hdHRyaWJ1dGVzLmQudmFsdWUgPSBcIk0xOCAxMkwwIDI0VjBcIjtcbiAgICBwbGF5ZXIuY3VycmVudFRpbWUgPSAwO1xufSk7XG5cbnZvbHVtZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICB2b2x1bWVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgIHZvbHVtZUNvbnRyb2xzLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkaXJlY3Rpb25Bd2FyZSk7XG5cbnNsaWRlcnMuZm9yRWFjaChmdW5jdGlvbiAoc2xpZGVyKSB7XG4gICAgdmFyIHBpbiA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKCcucGluJyk7XG4gICAgc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgd2luZG93W3Bpbi5kYXRhc2V0Lm1ldGhvZF0pO1xufSk7XG5cbmRpcmVjdGlvbkF3YXJlKCk7XG5cbmZ1bmN0aW9uIGlzRHJhZ2dhYmxlKGVsKSB7XG4gICAgdmFyIGNhbkRyYWcgPSBmYWxzZTtcbiAgICB2YXIgY2xhc3NlcyA9IEFycmF5LmZyb20oZWwuY2xhc3NMaXN0KTtcbiAgICBkcmFnZ2FibGVDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGRyYWdnYWJsZSkge1xuICAgICAgICBpZiAoY2xhc3Nlcy5pbmRleE9mKGRyYWdnYWJsZSkgIT09IC0xKSBjYW5EcmFnID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gY2FuRHJhZztcbn1cblxuZnVuY3Rpb24gaW5SYW5nZShldmVudCkge1xuICAgIHZhciByYW5nZUJveCA9IGdldFJhbmdlQm94KGV2ZW50KTtcbiAgICB2YXIgcmVjdCA9IHJhbmdlQm94LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBkaXJlY3Rpb24gPSByYW5nZUJveC5kYXRhc2V0LmRpcmVjdGlvbjtcbiAgICBpZiAoZGlyZWN0aW9uID09ICdob3Jpem9udGFsJykge1xuICAgICAgICB2YXIgbWluID0gcmFuZ2VCb3gub2Zmc2V0TGVmdDtcbiAgICAgICAgdmFyIG1heCA9IG1pbiArIHJhbmdlQm94Lm9mZnNldFdpZHRoO1xuICAgICAgICBpZiAoZXZlbnQuY2xpZW50WCA8IG1pbiB8fCBldmVudC5jbGllbnRYID4gbWF4KSByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG1pbiA9IHJlY3QudG9wO1xuICAgICAgICB2YXIgbWF4ID0gbWluICsgcmFuZ2VCb3gub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBpZiAoZXZlbnQuY2xpZW50WSA8IG1pbiB8fCBldmVudC5jbGllbnRZID4gbWF4KSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHtcbiAgICB2YXIgY3VycmVudCA9IHBsYXllci5jdXJyZW50VGltZTtcbiAgICB2YXIgcGVyY2VudCA9IGN1cnJlbnQgLyBwbGF5ZXIuZHVyYXRpb24gKiAxMDA7XG4gICAgcHJvZ3Jlc3Muc3R5bGUud2lkdGggPSBwZXJjZW50ICsgJyUnO1xuXG4gICAgY3VycmVudFRpbWUudGV4dENvbnRlbnQgPSBmb3JtYXRUaW1lKGN1cnJlbnQpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVWb2x1bWUoKSB7XG4gICAgdm9sdW1lUHJvZ3Jlc3Muc3R5bGUuaGVpZ2h0ID0gcGxheWVyLnZvbHVtZSAqIDEwMCArICclJztcbiAgICBpZiAocGxheWVyLnZvbHVtZSA+PSAwLjUpIHtcbiAgICAgICAgc3BlYWtlci5hdHRyaWJ1dGVzLmQudmFsdWUgPSAnTTE0LjY2NyAwdjIuNzQ3YzMuODUzIDEuMTQ2IDYuNjY2IDQuNzIgNi42NjYgOC45NDYgMCA0LjIyNy0yLjgxMyA3Ljc4Ny02LjY2NiA4LjkzNHYyLjc2QzIwIDIyLjE3MyAyNCAxNy40IDI0IDExLjY5MyAyNCA1Ljk4NyAyMCAxLjIxMyAxNC42NjcgMHpNMTggMTEuNjkzYzAtMi4zNi0xLjMzMy00LjM4Ni0zLjMzMy01LjM3M3YxMC43MDdjMi0uOTQ3IDMuMzMzLTIuOTg3IDMuMzMzLTUuMzM0em0tMTgtNHY4aDUuMzMzTDEyIDIyLjM2VjEuMDI3TDUuMzMzIDcuNjkzSDB6JztcbiAgICB9IGVsc2UgaWYgKHBsYXllci52b2x1bWUgPCAwLjUgJiYgcGxheWVyLnZvbHVtZSA+IDAuMDUpIHtcbiAgICAgICAgc3BlYWtlci5hdHRyaWJ1dGVzLmQudmFsdWUgPSAnTTAgNy42Njd2OGg1LjMzM0wxMiAyMi4zMzNWMUw1LjMzMyA3LjY2N00xNy4zMzMgMTEuMzczQzE3LjMzMyA5LjAxMyAxNiA2Ljk4NyAxNCA2djEwLjcwN2MyLS45NDcgMy4zMzMtMi45ODcgMy4zMzMtNS4zMzR6JztcbiAgICB9IGVsc2UgaWYgKHBsYXllci52b2x1bWUgPD0gMC4wNSkge1xuICAgICAgICBzcGVha2VyLmF0dHJpYnV0ZXMuZC52YWx1ZSA9ICdNMCA3LjY2N3Y4aDUuMzMzTDEyIDIyLjMzM1YxTDUuMzMzIDcuNjY3JztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFJhbmdlQm94KGV2ZW50KSB7XG4gICAgdmFyIHJhbmdlQm94ID0gZXZlbnQudGFyZ2V0O1xuICAgIHZhciBlbCA9IGN1cnJlbnRseURyYWdnZWQ7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gJ2NsaWNrJyAmJiBpc0RyYWdnYWJsZShldmVudC50YXJnZXQpKSB7XG4gICAgICAgIHJhbmdlQm94ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gJ21vdXNlbW92ZScpIHtcbiAgICAgICAgcmFuZ2VCb3ggPSBlbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiByYW5nZUJveDtcbn1cblxuZnVuY3Rpb24gZ2V0Q29lZmZpY2llbnQoZXZlbnQpIHtcbiAgICB2YXIgc2xpZGVyID0gZ2V0UmFuZ2VCb3goZXZlbnQpO1xuICAgIHZhciByZWN0ID0gc2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBLID0gMDtcbiAgICBpZiAoc2xpZGVyLmRhdGFzZXQuZGlyZWN0aW9uID09ICdob3Jpem9udGFsJykge1xuXG4gICAgICAgIHZhciBvZmZzZXRYID0gZXZlbnQuY2xpZW50WCAtIHNsaWRlci5vZmZzZXRMZWZ0O1xuICAgICAgICB2YXIgd2lkdGggPSBzbGlkZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIEsgPSBvZmZzZXRYIC8gd2lkdGg7XG4gICAgfSBlbHNlIGlmIChzbGlkZXIuZGF0YXNldC5kaXJlY3Rpb24gPT0gJ3ZlcnRpY2FsJykge1xuXG4gICAgICAgIHZhciBoZWlnaHQgPSBzbGlkZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICB2YXIgb2Zmc2V0WSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcDtcbiAgICAgICAgSyA9IDEgLSBvZmZzZXRZIC8gaGVpZ2h0O1xuICAgIH1cbiAgICByZXR1cm4gSztcbn1cblxuZnVuY3Rpb24gcmV3aW5kKGV2ZW50KSB7XG4gICAgaWYgKGluUmFuZ2UoZXZlbnQpKSB7XG4gICAgICAgIHBsYXllci5jdXJyZW50VGltZSA9IHBsYXllci5kdXJhdGlvbiAqIGdldENvZWZmaWNpZW50KGV2ZW50KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNoYW5nZVZvbHVtZShldmVudCkge1xuICAgIGlmIChpblJhbmdlKGV2ZW50KSkge1xuICAgICAgICBwbGF5ZXIudm9sdW1lID0gZ2V0Q29lZmZpY2llbnQoZXZlbnQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lKSB7XG4gICAgdmFyIG1pbiA9IE1hdGguZmxvb3IodGltZSAvIDYwKTtcbiAgICB2YXIgc2VjID0gTWF0aC5mbG9vcih0aW1lICUgNjApO1xuICAgIHJldHVybiBtaW4gKyAnOicgKyAoc2VjIDwgMTAgPyAnMCcgKyBzZWMgOiBzZWMpO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVQbGF5KCkge1xuICAgIGlmIChwbGF5ZXIucGF1c2VkKSB7XG4gICAgICAgIHBsYXlQYXVzZS5hdHRyaWJ1dGVzLmQudmFsdWUgPSBcIk0wIDBoNnYyNEgwek0xMiAwaDZ2MjRoLTZ6XCI7XG4gICAgICAgIHBsYXllci5wbGF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcGxheVBhdXNlLmF0dHJpYnV0ZXMuZC52YWx1ZSA9IFwiTTE4IDEyTDAgMjRWMFwiO1xuICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG1ha2VQbGF5KCkge1xuICAgIHBsYXlwYXVzZUJ0bi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBsb2FkaW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59XG5cbmZ1bmN0aW9uIGRpcmVjdGlvbkF3YXJlKCkge1xuICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCAyNTApIHtcbiAgICAgICAgdm9sdW1lQ29udHJvbHMuc3R5bGUuYm90dG9tID0gJy01NHB4JztcbiAgICAgICAgdm9sdW1lQ29udHJvbHMuc3R5bGUubGVmdCA9ICc1NHB4JztcbiAgICB9IGVsc2UgaWYgKGF1ZGlvUGxheWVyLm9mZnNldFRvcCA8IDE1NCkge1xuICAgICAgICB2b2x1bWVDb250cm9scy5zdHlsZS5ib3R0b20gPSAnLTE2NHB4JztcbiAgICAgICAgdm9sdW1lQ29udHJvbHMuc3R5bGUubGVmdCA9ICctM3B4JztcbiAgICB9IGVsc2Uge1xuICAgICAgICB2b2x1bWVDb250cm9scy5zdHlsZS5ib3R0b20gPSAnNTJweCc7XG4gICAgICAgIHZvbHVtZUNvbnRyb2xzLnN0eWxlLmxlZnQgPSAnLTNweCc7XG4gICAgfVxufSJdfQ==
